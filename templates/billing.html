{% extends 'base.html' %}

{% block title %}–ü—ñ–¥–ø–∏—Å–∫–∞{% endblock %}

{% block content %}
<div class="card">
  <h1>üí≥ –ü—ñ–¥–ø–∏—Å–∫–∞</h1>

  {% if billing_account %}
    <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {{ billing_account.subscription_status or 'none' }}</p>
    {% if billing_account.current_period_end %}
      <p><strong>–û–ø–ª–∞—á–µ–Ω–æ –¥–æ:</strong> {{ billing_account.current_period_end.strftime('%Y-%m-%d %H:%M') }} UTC</p>
    {% endif %}
    {% if billing_account.cancel_at_period_end %}
      <p class="alert alert-warning">–°–∫–∞—Å—É–≤–∞–Ω–Ω—è –≤ –∫—ñ–Ω—Ü—ñ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É —É–≤—ñ–º–∫–Ω–µ–Ω–æ.</p>
    {% endif %}
  {% else %}
    <p>–ü—ñ–¥–ø–∏—Å–∫–∞ —â–µ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞.</p>
  {% endif %}

  <div style="margin-top: 16px;">
    <form method="POST" action="{{ url_for('billing.create_checkout_session') }}">
      {% if next_path %}<input type="hidden" name="next" value="{{ next_path }}">{% endif %}
      <button class="btn btn-primary" type="submit">–û—Ñ–æ—Ä–º–∏—Ç–∏ / –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É</button>
    </form>
  </div>

  <div style="margin-top: 12px;">
    <form method="POST" action="{{ url_for('billing.create_portal_session') }}">
      <button class="btn" type="submit">–ö–µ—Ä—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–æ—é (Stripe)</button>
    </form>
  </div>

  <div style="margin-top: 12px; font-size: 14px; opacity: .9;">
    <p>–Ø–∫—â–æ Stripe –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ, –¥–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ: STRIPE_SECRET_KEY, STRIPE_PRICE_ID, STRIPE_WEBHOOK_SECRET.</p>
  </div>
</div>
{% endblock %}
